import{j as e}from"./ui-DjmETXT1.js";import{r as f,u as o,q as m,M as u,K as y,g as t,t as N,v as g,w as x,x as r,y as v,z as i,f as h,A as b}from"./index-D5z5fl22.js";import{N as T}from"./vendor-C3n1ReTT.js";import"./supabase-xng3xIeN.js";import"./charts-CVdhJMV6.js";function L(){const{user:a}=f(),{data:l,isLoading:j}=o({queryKey:["is-super-admin",a==null?void 0:a.id],queryFn:async()=>{if(!a)return!1;const{data:s}=await m.from("user_roles").select("role").eq("user_id",a.id).eq("role","super_admin").single();return!!s},enabled:!!a}),{data:d,isLoading:p}=o({queryKey:["all-domains"],queryFn:async()=>{const{data:s}=await m.from("custom_domains").select("*, companies(name)").order("created_at",{ascending:!1});return s||[]},enabled:l===!0});if(j)return e.jsx(u,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})})});if(!l)return e.jsx(T,{to:"/dashboard",replace:!0});const c=s=>{const n={active:"default",verified:"secondary",pending:"outline",failed:"destructive"};return e.jsx(b,{variant:n[s]||"outline",children:s==null?void 0:s.toUpperCase()})};return e.jsx(u,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"h-8 w-8 text-primary"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Custom Domain Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage all custom domain requests"})]})]}),p?e.jsx(t,{className:"p-6 animate-pulse",children:e.jsx("div",{className:"space-y-4",children:[1,2,3].map(s=>e.jsx("div",{className:"h-12 bg-muted rounded"},s))})}):!d||d.length===0?e.jsx(t,{className:"p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No custom domains yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Domain requests will appear here"})]})}):e.jsx(t,{children:e.jsxs(N,{children:[e.jsx(g,{children:e.jsxs(x,{children:[e.jsx(r,{children:"Domain"}),e.jsx(r,{children:"Company"}),e.jsx(r,{children:"Status"}),e.jsx(r,{children:"SSL Status"}),e.jsx(r,{children:"Requested"}),e.jsx(r,{children:"Verified"})]})}),e.jsx(v,{children:d.map(s=>{var n;return e.jsxs(x,{children:[e.jsx(i,{className:"font-medium",children:s.domain}),e.jsx(i,{children:(n=s.companies)==null?void 0:n.name}),e.jsx(i,{children:c(s.status)}),e.jsx(i,{children:c(s.ssl_status)}),e.jsx(i,{children:h(new Date(s.created_at),"dd MMM yyyy")}),e.jsx(i,{children:s.verified_at?h(new Date(s.verified_at),"dd MMM yyyy"):"-"})]},s.id)})})]})}),e.jsxs(t,{className:"p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"DNS Setup Instructions for Customers"}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("p",{children:"Customers need to add these DNS records at their domain registrar:"}),e.jsx("pre",{className:"bg-muted p-4 rounded-lg overflow-x-auto",children:`A Record:
  Name: @
  Value: [Your_Server_IP]
  TTL: 3600

A Record:
  Name: www
  Value: [Your_Server_IP]
  TTL: 3600

TXT Record:
  Name: _torqueninja-verify
  Value: [Verification_Token]
  TTL: 3600`})]})]})]})})}export{L as default};
